(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{182:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout-manager",{attrs:{page:t.$page}},[a("div",{staticClass:"markdown-body is-component"},[a("p",[t._v("åˆ†é¡µæ•ˆæœé¢„è§ˆï¼š")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://luyilin.github.io/Minemine-pagination/dist/index.html"}},[t._v("åœ¨çº¿ demo")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/luyilin/Minemine-pagination"}},[t._v("github åœ°å€")])]),t._v(" "),a("li",[t._v("åˆ†é¡µæ•ˆæœæˆªå›¾"),a("img",{attrs:{src:"https://ooo.0o0.ooo/2017/04/19/58f7246807888.png",alt:"messagedboard"}})])]),t._v(" "),a("h3",{attrs:{id:""}},[t._v("å‰è¨€")]),t._v(" "),a("blockquote",[a("ol",[a("li",[t._v("ä½¿ç”¨ vue-cli åˆå§‹åŒ–é¡¹ç›® ")]),t._v(" "),a("li",[t._v("ä½¿ç”¨ vuex ç®¡ç†æ•°æ®")]),t._v(" "),a("li",[t._v("node v6.9.2ï¼Œnpm v3.10.9")])])]),t._v(" "),a("h3",{attrs:{id:"-2"}},[t._v("åˆ†é¡µåŸç†")]),t._v(" "),a("p",[t._v("å®ç°åˆ†é¡µä¸»è¦ä¾é ä¸¤ä¸ªå‚æ•°ï¼Œåç§»é‡ï¼ˆoffsetï¼‰ã€é™åˆ¶æ•°ï¼ˆlimitï¼‰ã€‚ç‚¹å‡»åˆ†é¡µå‘é€ Ajax è¯·æ±‚ï¼Œå°†è¿™ä¸¤ä¸ªå‚æ•°ä¼ ç»™åç«¯ï¼Œåç«¯ä»æ•°æ®åº“ç­›é€‰å‡ºå¯¹åº”çš„æ•°æ®è¿”å›ç»™å‰ç«¯ï¼Œå‰ç«¯å°†è·å–åˆ°çš„æ•°æ®æ·»åŠ åˆ°é¡µé¢ä¸­ï¼Œåˆ†é¡µç»„ä»¶æ ¹æ®åç§»é‡å’Œé™åˆ¶æ•°æ˜¾ç¤ºå¯¹åº”çš„é¡µç ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•åœ°å®ç°åˆ†é¡µçš„æ€è·¯ã€‚")]),t._v(" "),a("h3",{attrs:{id:"-3"}},[t._v("åˆ†é¡µç±»å‹")]),t._v(" "),a("p",[t._v("åˆ†é¡µä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼Œä¸€ç§ç»å¸¸ç”¨äºç§»åŠ¨ç«¯çš„æ»šåŠ¨åŠ è½½ï¼Œæˆ–æ˜¯ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»å³å¯åŠ è½½æ›´å¤šã€‚è¿™ç§åˆ†é¡µå®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå‰ç«¯ä»…éœ€å®šä¹‰ä¸€ä¸ª offset å˜é‡ï¼Œæ¯æ¬¡ ajax è¯·æ±‚æ—¶ offset += limitï¼Œç„¶åå°†è·å–åˆ°çš„å†…å®¹ append ä¸Šå»å³å¯ã€‚\nå¦ä¸€ç§æ˜¯æ˜¾ç¤ºæ€»é¡µæ•°ã€å½“å‰é¡µæ•°ã€ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µæŒ‰é’®ï¼Œä¸”é¡µæ•°è¾ƒå¤šæ—¶å°†ä¸­é—´é¡µæ•°ç”¨çœç•¥å·è¡¨ç¤ºã€‚è¿™ç§åˆ†é¡µå®ç°èµ·æ¥ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œä½†ç”¨æˆ·ä½“éªŒæ›´å¥½ï¼Œæœ¬æ–‡è®¨è®ºçš„å°±æ˜¯å¦‚ä½•ä½¿ç”¨ vue å®ç°è¿™æ ·çš„åˆ†é¡µç»„ä»¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"-4"}},[t._v("åˆ†é¡µç»„ä»¶")]),t._v(" "),a("p",[t._v("åˆ›å»º pagination.vue æ–‡ä»¶ã€‚")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[[t._v("\n    "),a("div",{attrs:{class:"page-wrap"}},[t._v("\n      "),a("ul",{attrs:{"v-show":"prePage",class:"li-page","v-tap":"{methods: goPrePage}"}},[t._v("ä¸Šä¸€é¡µ")]),t._v("\n      "),a("ul",[t._v("\n        "),a("li",{attrs:{"v-for":"i in showPageBtn",":class":"{active: i === currentPage, pointer: i, hover: i && i !== currentPage}","v-tap":"{methods: goPage, i: i}"}},[t._v("\n          "),a("a",{attrs:{"v-if":"i",class:"notPointer"}},[t._v("{{i}}")]),t._v("\n          "),a("a",{attrs:{"v-else":""}},[t._v("Â·Â·Â·")]),t._v("\n        ")]),t._v("\n      ")]),t._v("\n      "),a("ul",{attrs:{"v-show":"nextPage",class:"li-page","v-tap":"{methods: goNextPage}"}},[t._v("ä¸‹ä¸€é¡µ")]),t._v("\n    ")]),t._v("\n")]],2)])]),a("p",[t._v("ç»„ä»¶çš„ä½œç”¨åŸŸæ˜¯ç‹¬ç«‹çš„ï¼Œçˆ¶ç»„ä»¶é€šä¿¡é€šè¿‡ props å‘å…¶ä¼ é€’æ•°æ®ï¼Œåˆ†é¡µç»„ä»¶é€šè¿‡ $emit è§¦å‘åœ¨çˆ¶ç»„ä»¶å®šä¹‰çš„äº‹ä»¶å®ç°å’Œçˆ¶ç»„ä»¶çš„é€šä¿¡ï¼Œå› æ­¤é¢„è®¾ä»çˆ¶ç»„ä»¶è·å–åˆ°éœ€æ˜¾ç¤ºçš„æ€»æ•° num ä¸º 30 , limit ä¸º 5ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥éšæ„è®¾ç½®è¿™ä¸¤ä¸ªå€¼ï½")]),t._v(" "),a("pre",[a("code",[t._v("```\nlet that\nexport default{\n    data(){\n      that = this\n      return{\n        num: 30,\n        limit: 5\n      }\n    }\n}\n```\n")])]),t._v(" "),a("p",[t._v("è®¡ç®—å‡ ä¸ªå˜é‡ï¼Œåœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨ vue çš„è®¡ç®—å±æ€§ computed\næ€»é¡µæ•° totalPage åº”è¯¥ç­‰äºéœ€æ˜¾ç¤ºçš„æ€»æ•°é™¤ä»¥æ¯é¡µæ˜¾ç¤ºçš„ä¸ªæ•°ï¼Œå¹¶å‘ä¸Šå–æ•´ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("computed: {\n      totalPage() {\n        return Math.ceil(that.num / that.limit)\n      }\n    }")])])]),a("p",[t._v("åç§»é‡ offsetï¼Œå› ä¸ºç‚¹å‡»ä¸Šä¸‹é¡µã€åˆ¶å®šé¡µç å‡ä¼šæ”¹å˜ offset å˜é‡ï¼Œçˆ¶ç»„ä»¶ä¹Ÿéœ€è¦ç”¨åˆ°è¿™ä¸ªå˜é‡å‘é€ ajax è¯·æ±‚ï¼Œå› æ­¤ä½¿ç”¨ vuex å­˜å‚¨ offsetã€‚")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("// pagination.vue\n    computed: {\n      offset() {\n          return that.$store.state.offset\n      }\n    }")])])]),a("p",[t._v("å½“å‰é¡µé¢ currentPageï¼Œå½“å‰é¡µé¢æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªå˜é‡ï¼Œæ˜¾ç¤ºç”¨æˆ·å½“å‰æ‰€å¤„é¡µæ•°ï¼Œå·²çŸ¥åç§»é‡å’Œæ¯é¡µæ˜¾ç¤ºæ•°é‡å¯ä»¥å¾—å‡ºå½“å‰é¡µé¢æ˜¯äºŒè€…çš„ä½™æ•°å‘ä¸Šå–æ•´ï¼Œå› ä¸ºé¡µæ•°ä¸ä»0å¼€å§‹ï¼Œå› æ­¤")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("computed: {\n      currentPage() {\n        return Math.ceil(that.offset / that.limit) + 1\n      }\n    }")])])]),a("p",[t._v("æ˜¯å¦æ˜¾ç¤ºä¸Šä¸€é¡µæŒ‰é’® prePageï¼Œå› ä¸ºåœ¨é¦–é¡µçš„æ—¶å€™åç§»é‡ä¸º0ï¼Œå› æ­¤åªè¦åç§»é‡ä¸ç­‰äº0åˆ™å½“å‰é¡µé¢è‚¯å®šä¸åœ¨ç¬¬ä¸€é¡µï¼Œåˆ™æ˜¾ç¤ºä¸Šä¸€é¡µæŒ‰é’®ï¼Œå¹¶ä¸” num ä¸ç­‰äº 0ã€‚")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("coumputed: {\n      prePage() {\n        return that.offset !== 0 && that.num\n      }\n    }")])])]),a("p",[t._v("æ˜¯å¦æ˜¾ç¤ºä¸‹ä¸€é¡µæŒ‰é’® nextPageï¼Œè¿™ä¸ªä¹Ÿå¾ˆå¥½ç†è§£ï¼Œåªè¦åç§»é‡å’Œæ¯é¡µæ˜¾ç¤ºçš„ä¸ªæ•°ç›¸åŠ å°äºéœ€æ˜¾ç¤ºçš„æ€»æ•°ï¼Œåˆ™æ˜¾ç¤ºä¸‹ä¸€é¡µæŒ‰é’®ï¼Œå¹¶ä¸” num ä¸ç­‰äº 0ã€‚")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("computed: {\n      nextPage() {\n        return (that.offset + that.limit < that.num) && that.num\n      }\n    }")])])]),a("p",[t._v("é¡µç è®¡ç®— showPageBtnï¼Œé¡µç è®¡ç®—æ˜¯è¿™ä¸ªåˆ†é¡µç»„ä»¶çš„æ ¸å¿ƒå†…å®¹ï¼ŒåŸºæœ¬æ€è·¯æ˜¯å½“æ€»é¡µæ•°ä¸å¤§äº5æ—¶ï¼Œæ˜¾ç¤ºå…¨éƒ¨é¡µç ï¼›å½“æ€»é¡µæ•°å¤§äº5æ—¶ï¼Œå§‹ç»ˆæ˜¾ç¤ºé¦–å°¾é¡µç ï¼Œå½“å½“å‰é¡µç è·é¦–é¡µå°äº2æ—¶ï¼Œæ˜¾ç¤ºå‰ä¸‰é¡µé¡µç å’Œçœç•¥å·ï¼›å½“å½“å‰é¡µç è·å°¾é¡µå°äº2æ—¶ï¼Œæ˜¾ç¤ºåä¸‰é¡µé¡µç ï¼Œå½“å½“å‰é¡µç è·é¦–é¡µç­‰äº2æ—¶ï¼Œæ˜¾ç¤ºå‰å››é¡µé¡µç å’Œçœç•¥å·ï¼›å½“å½“å‰é¡µç è·å°¾é¡µç­‰äº2æ—¶ï¼Œæ˜¾ç¤ºåå››é¡µé¡µç å’Œçœç•¥å·ï¼›å½“å½“å‰é¡µç è·é¦–é¡µå¤§äº3ä¸”è·å°¾é¡µå¤§äº3æ—¶ï¼Œæ˜¾ç¤ºå½“å‰é¡µç å’Œå½“å‰é¡µç çš„å‰ä¸€é¡µå’Œåä¸€é¡µï¼Œä¸¤è¾¹å„æœ‰ä¸€ä¸ªçœç•¥å·ï¼›åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨0ä»£è¡¨çœç•¥å·")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("computed: {\n      showPageBtn() {\n          let pageNum = that.totalPage,\n              index = that.currentPage,\n              arr = []\n          if (pageNum <= 5) {\n            for(let i = 1; i <= pageNum; i++) {\n              arr.push(i)\n            }\n            return arr\n          }\n          if (index <= 2) return [1,2,3,0,pageNum]\n          if (index >= pageNum -1) return [1,0, pageNum -2, pageNum -1, pageNum]\n          if (index === 3) return [1,2,3,4,0,pageNum]\n          if (index === pageNum -2) return [1,0, pageNum-3, pageNum-2, pageNum-1, pageNum]\n          return [1,0, index-1, index, index + 1, 0, pageNum]\n        }\n    }")])])]),a("p",[t._v("è·³è½¬äº‹ä»¶ï¼Œåˆ†åˆ«ç‚¹å‡»ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µå’ŒæŒ‡å®šé¡µç ã€‚")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("methods: {\n      goPage(params) {\n        if (params.i === 0 || params.i === that.currentPage) return\n        that.$store.commit('GO_PAGE', (params.i-1) * that.limit)\n        that.$emit('getNew')\n      },\n      goPrePage() {\n        that.$store.commit('PRE_PAGE', that.limit)\n        that.$emit('getNew')\n      },\n      goNextPage() {\n        that.$store.commit('NEXT_PAGE', that.limit)\n        that.$emit('getNew')\n      }\n    }")])])]),a("h3",{attrs:{id:"vuex"}},[t._v("vuex éƒ¨åˆ†")]),t._v(" "),a("p",[t._v("åœ¨æ­¤ä»‹ç»ä¸€ä¸‹ vuex éƒ¨åˆ†çš„å®ç°ï¼Œå­¦ä¹ äº†äºŒå“²å¤§å¤§çš„ vuex éƒ¨åˆ†çš„ç»“æ„ã€‚åœ¨ src ç›®å½•ä¸‹ï¼ˆå’Œ components ç›®å½•å¹³çº§ï¼‰ï¼Œæ–°å»º store ç›®å½•ï¼Œå…¶ä¸­ index.js æ–‡ä»¶ä¼ å…¥ mutationï¼Œåˆå§‹åŒ– vuexï¼›")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("// vuex \bstore/index.js\n  import Vue from 'vue'\n  import Vuex from 'vuex'\n  import mutations from './mutations'\n  \n  Vue.use(Vuex);\n  \n  const state = {\n    offset: 0\n  };\n  \n  export default new Vuex.Store({\n    state,\n    mutations\n  })")])])]),a("p",[t._v("mutation-types.js è®°å½•æ‰€æœ‰çš„äº‹ä»¶åï¼Œå…¶å®è¿™ä¸ªæ–‡ä»¶æœ€å¤§çš„å¥½å¤„æ˜¯èƒ½è®©æˆ‘ä»¬æ›´ç›´è§‚åœ°ç®¡ç†æ‰€æœ‰çš„ vuex æ–¹æ³•ï¼Œå®ƒçš„ä¼˜ç‚¹ä¼šåœ¨é¡¹ç›®å¤æ‚åå‡¸æ˜¾å‡ºæ¥ï¼Œé¡¹ç›®å¤æ‚æ—¶æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨ vuex å­˜å‚¨å¾ˆå¤šæ•°æ®ã€å®šä¹‰å¾ˆå¤šæ–¹æ³•ï¼Œè¿™æ—¶ mutation-types.js å°±èƒ½æ›´å¥½æ›´ç›´è§‚åœ°ç®¡ç†è¿™äº›æ–¹æ³•ã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§è®¾è®¡ç†å¿µå˜›ï¼Œæœ‰åˆ©äºåæœŸç»´æŠ¤ã€‚")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("// mutation-types.js\n    export const PRE_PAGE = 'PRE_PAGE'\n    export const NEXT_PAGE = 'NEXT_PAGE'\n    export const GO_PAGE = 'GO_PAGE'")])])]),a("p",[t._v("mutation.js è¿™æ˜¯ vuex çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œæ³¨å†Œäº†å®ç°çš„æ‰€æœ‰äº‹ä»¶ï¼Œæˆ‘ä»¬å®šä¹‰äº†ç‚¹å‡»ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µå’Œè·³è½¬åˆ°æŒ‡å®šé¡µé¢çš„æ–¹æ³•ã€‚")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("// mutation.js\n  import * as types from './mutation-types'\n\n  export default {\n    // åˆ†é¡µ ä¸Šä¸€é¡µ\n    [types.PRE_PAGE] (state, offset) {\n      state.offset -= offset\n    },\n    // åˆ†é¡µ ä¸‹ä¸€é¡µ\n    [types.NEXT_PAGE] (state, offset) {\n      state.offset += offset\n    },\n    // åˆ†é¡µ è·³è½¬åˆ°æŒ‡å®šé¡µç \n    [types.GO_PAGE] (state, offset) {\n      state.offset = offset\n    }\n  };")])])]),a("h3",{attrs:{id:"how-to-run"}},[t._v("how to run")]),t._v(" "),a("div",{pre:!0,attrs:{class:"pre-wrapper","data-lang":""}},[a("pre",{attrs:{class:""}},[a("code",{attrs:{class:""}},[t._v("$ npm install \n\n$ npm run dev\n\n// è®¿é—® http://localhost:8088/index.html")])])]),a("p",[t._v("æœ€åæ‰“ä¸ªå°å¹¿å‘ŠğŸ£ à¹‘ä¹›â—¡ä¹›à¹‘")]),t._v(" "),a("p",[t._v("æˆ‘çš„ä¸ªäººç½‘ç«™ï¼š"),a("a",{attrs:{href:"https://minemine.cc/"}},[t._v("https://minemine.cc/")])]),t._v(" "),a("p",[t._v("github åœ°å€ï¼š"),a("a",{attrs:{href:"https://github.com/luyilin"}},[t._v("https://github.com/luyilin")])])])])};n._withStripped=!0;var s=a(1),r=function(t){const e="wrap-page-2017-04-19-vue-pagination",a={slug:"vue-pagination",permalink:"/2017/04/19/vue-pagination",attributes:{title:"ä½¿ç”¨ vue2.0 å®ç°ä¸€ä¸ªç®€æ´çš„åˆ†é¡µç»„ä»¶",date:"2017-04-19T00:00:00.000Z",tags:["code"],type:"post",layout:"post"},body:'<p>åˆ†é¡µæ•ˆæœé¢„è§ˆï¼š</p>\n<ul>\n<li><a href="https://luyilin.github.io/Minemine-pagination/dist/index.html">åœ¨çº¿ demo</a></li>\n<li><a href="https://github.com/luyilin/Minemine-pagination">github åœ°å€</a></li>\n<li>åˆ†é¡µæ•ˆæœæˆªå›¾<img src="https://ooo.0o0.ooo/2017/04/19/58f7246807888.png" alt="messagedboard"></li>\n</ul>\n<h3 id="">å‰è¨€</h3>\n<blockquote>\n<ol>\n<li>ä½¿ç”¨ vue-cli åˆå§‹åŒ–é¡¹ç›® \x3c!--more--\x3e</li>\n<li>ä½¿ç”¨ vuex ç®¡ç†æ•°æ®</li>\n<li>node v6.9.2ï¼Œnpm v3.10.9</li>\n</ol>\n</blockquote>\n<h3 id="-2">åˆ†é¡µåŸç†</h3>\n<p>å®ç°åˆ†é¡µä¸»è¦ä¾é ä¸¤ä¸ªå‚æ•°ï¼Œåç§»é‡ï¼ˆoffsetï¼‰ã€é™åˆ¶æ•°ï¼ˆlimitï¼‰ã€‚ç‚¹å‡»åˆ†é¡µå‘é€ Ajax è¯·æ±‚ï¼Œå°†è¿™ä¸¤ä¸ªå‚æ•°ä¼ ç»™åç«¯ï¼Œåç«¯ä»æ•°æ®åº“ç­›é€‰å‡ºå¯¹åº”çš„æ•°æ®è¿”å›ç»™å‰ç«¯ï¼Œå‰ç«¯å°†è·å–åˆ°çš„æ•°æ®æ·»åŠ åˆ°é¡µé¢ä¸­ï¼Œåˆ†é¡µç»„ä»¶æ ¹æ®åç§»é‡å’Œé™åˆ¶æ•°æ˜¾ç¤ºå¯¹åº”çš„é¡µç ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•åœ°å®ç°åˆ†é¡µçš„æ€è·¯ã€‚</p>\n<h3 id="-3">åˆ†é¡µç±»å‹</h3>\n<p>åˆ†é¡µä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼Œä¸€ç§ç»å¸¸ç”¨äºç§»åŠ¨ç«¯çš„æ»šåŠ¨åŠ è½½ï¼Œæˆ–æ˜¯ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»å³å¯åŠ è½½æ›´å¤šã€‚è¿™ç§åˆ†é¡µå®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå‰ç«¯ä»…éœ€å®šä¹‰ä¸€ä¸ª offset å˜é‡ï¼Œæ¯æ¬¡ ajax è¯·æ±‚æ—¶ offset += limitï¼Œç„¶åå°†è·å–åˆ°çš„å†…å®¹ append ä¸Šå»å³å¯ã€‚\nå¦ä¸€ç§æ˜¯æ˜¾ç¤ºæ€»é¡µæ•°ã€å½“å‰é¡µæ•°ã€ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µæŒ‰é’®ï¼Œä¸”é¡µæ•°è¾ƒå¤šæ—¶å°†ä¸­é—´é¡µæ•°ç”¨çœç•¥å·è¡¨ç¤ºã€‚è¿™ç§åˆ†é¡µå®ç°èµ·æ¥ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œä½†ç”¨æˆ·ä½“éªŒæ›´å¥½ï¼Œæœ¬æ–‡è®¨è®ºçš„å°±æ˜¯å¦‚ä½•ä½¿ç”¨ vue å®ç°è¿™æ ·çš„åˆ†é¡µç»„ä»¶ã€‚</p>\n<h3 id="-4">åˆ†é¡µç»„ä»¶</h3>\n<p>åˆ›å»º pagination.vue æ–‡ä»¶ã€‚</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class=""><template>\n    <div class="page-wrap">\n      <ul v-show="prePage" class="li-page" v-tap="{methods: goPrePage}">ä¸Šä¸€é¡µ</ul>\n      <ul>\n        <li v-for="i in showPageBtn" :class="{active: i === currentPage, pointer: i, hover: i && i !== currentPage}"\n            v-tap="{methods: goPage, i: i}">\n          <a v-if="i" class="notPointer">{{i}}</a>\n          <a v-else>Â·Â·Â·</a>\n        </li>\n      </ul>\n      <ul v-show="nextPage" class="li-page" v-tap="{methods: goNextPage}">ä¸‹ä¸€é¡µ</ul>\n    </div>\n</template></code></pre></div><p>ç»„ä»¶çš„ä½œç”¨åŸŸæ˜¯ç‹¬ç«‹çš„ï¼Œçˆ¶ç»„ä»¶é€šä¿¡é€šè¿‡ props å‘å…¶ä¼ é€’æ•°æ®ï¼Œåˆ†é¡µç»„ä»¶é€šè¿‡ $emit è§¦å‘åœ¨çˆ¶ç»„ä»¶å®šä¹‰çš„äº‹ä»¶å®ç°å’Œçˆ¶ç»„ä»¶çš„é€šä¿¡ï¼Œå› æ­¤é¢„è®¾ä»çˆ¶ç»„ä»¶è·å–åˆ°éœ€æ˜¾ç¤ºçš„æ€»æ•° num ä¸º 30 , limit ä¸º 5ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥éšæ„è®¾ç½®è¿™ä¸¤ä¸ªå€¼ï½</p>\n<pre><code>```\nlet that\nexport default{\n    data(){\n      that = this\n      return{\n        num: 30,\n        limit: 5\n      }\n    }\n}\n```\n</code></pre>\n<p>è®¡ç®—å‡ ä¸ªå˜é‡ï¼Œåœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨ vue çš„è®¡ç®—å±æ€§ computed\næ€»é¡µæ•° totalPage åº”è¯¥ç­‰äºéœ€æ˜¾ç¤ºçš„æ€»æ•°é™¤ä»¥æ¯é¡µæ˜¾ç¤ºçš„ä¸ªæ•°ï¼Œå¹¶å‘ä¸Šå–æ•´ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">computed: {\n      totalPage() {\n        return Math.ceil(that.num / that.limit)\n      }\n    }</code></pre></div><p>åç§»é‡ offsetï¼Œå› ä¸ºç‚¹å‡»ä¸Šä¸‹é¡µã€åˆ¶å®šé¡µç å‡ä¼šæ”¹å˜ offset å˜é‡ï¼Œçˆ¶ç»„ä»¶ä¹Ÿéœ€è¦ç”¨åˆ°è¿™ä¸ªå˜é‡å‘é€ ajax è¯·æ±‚ï¼Œå› æ­¤ä½¿ç”¨ vuex å­˜å‚¨ offsetã€‚</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">// pagination.vue\n    computed: {\n      offset() {\n          return that.$store.state.offset\n      }\n    }</code></pre></div><p>å½“å‰é¡µé¢ currentPageï¼Œå½“å‰é¡µé¢æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªå˜é‡ï¼Œæ˜¾ç¤ºç”¨æˆ·å½“å‰æ‰€å¤„é¡µæ•°ï¼Œå·²çŸ¥åç§»é‡å’Œæ¯é¡µæ˜¾ç¤ºæ•°é‡å¯ä»¥å¾—å‡ºå½“å‰é¡µé¢æ˜¯äºŒè€…çš„ä½™æ•°å‘ä¸Šå–æ•´ï¼Œå› ä¸ºé¡µæ•°ä¸ä»0å¼€å§‹ï¼Œå› æ­¤</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">computed: {\n      currentPage() {\n        return Math.ceil(that.offset / that.limit) + 1\n      }\n    }</code></pre></div><p>æ˜¯å¦æ˜¾ç¤ºä¸Šä¸€é¡µæŒ‰é’® prePageï¼Œå› ä¸ºåœ¨é¦–é¡µçš„æ—¶å€™åç§»é‡ä¸º0ï¼Œå› æ­¤åªè¦åç§»é‡ä¸ç­‰äº0åˆ™å½“å‰é¡µé¢è‚¯å®šä¸åœ¨ç¬¬ä¸€é¡µï¼Œåˆ™æ˜¾ç¤ºä¸Šä¸€é¡µæŒ‰é’®ï¼Œå¹¶ä¸” num ä¸ç­‰äº 0ã€‚</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">coumputed: {\n      prePage() {\n        return that.offset !== 0 && that.num\n      }\n    }</code></pre></div><p>æ˜¯å¦æ˜¾ç¤ºä¸‹ä¸€é¡µæŒ‰é’® nextPageï¼Œè¿™ä¸ªä¹Ÿå¾ˆå¥½ç†è§£ï¼Œåªè¦åç§»é‡å’Œæ¯é¡µæ˜¾ç¤ºçš„ä¸ªæ•°ç›¸åŠ å°äºéœ€æ˜¾ç¤ºçš„æ€»æ•°ï¼Œåˆ™æ˜¾ç¤ºä¸‹ä¸€é¡µæŒ‰é’®ï¼Œå¹¶ä¸” num ä¸ç­‰äº 0ã€‚</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">computed: {\n      nextPage() {\n        return (that.offset + that.limit < that.num) && that.num\n      }\n    }</code></pre></div><p>é¡µç è®¡ç®— showPageBtnï¼Œé¡µç è®¡ç®—æ˜¯è¿™ä¸ªåˆ†é¡µç»„ä»¶çš„æ ¸å¿ƒå†…å®¹ï¼ŒåŸºæœ¬æ€è·¯æ˜¯å½“æ€»é¡µæ•°ä¸å¤§äº5æ—¶ï¼Œæ˜¾ç¤ºå…¨éƒ¨é¡µç ï¼›å½“æ€»é¡µæ•°å¤§äº5æ—¶ï¼Œå§‹ç»ˆæ˜¾ç¤ºé¦–å°¾é¡µç ï¼Œå½“å½“å‰é¡µç è·é¦–é¡µå°äº2æ—¶ï¼Œæ˜¾ç¤ºå‰ä¸‰é¡µé¡µç å’Œçœç•¥å·ï¼›å½“å½“å‰é¡µç è·å°¾é¡µå°äº2æ—¶ï¼Œæ˜¾ç¤ºåä¸‰é¡µé¡µç ï¼Œå½“å½“å‰é¡µç è·é¦–é¡µç­‰äº2æ—¶ï¼Œæ˜¾ç¤ºå‰å››é¡µé¡µç å’Œçœç•¥å·ï¼›å½“å½“å‰é¡µç è·å°¾é¡µç­‰äº2æ—¶ï¼Œæ˜¾ç¤ºåå››é¡µé¡µç å’Œçœç•¥å·ï¼›å½“å½“å‰é¡µç è·é¦–é¡µå¤§äº3ä¸”è·å°¾é¡µå¤§äº3æ—¶ï¼Œæ˜¾ç¤ºå½“å‰é¡µç å’Œå½“å‰é¡µç çš„å‰ä¸€é¡µå’Œåä¸€é¡µï¼Œä¸¤è¾¹å„æœ‰ä¸€ä¸ªçœç•¥å·ï¼›åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨0ä»£è¡¨çœç•¥å·</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">computed: {\n      showPageBtn() {\n          let pageNum = that.totalPage,\n              index = that.currentPage,\n              arr = []\n          if (pageNum <= 5) {\n            for(let i = 1; i <= pageNum; i++) {\n              arr.push(i)\n            }\n            return arr\n          }\n          if (index <= 2) return [1,2,3,0,pageNum]\n          if (index >= pageNum -1) return [1,0, pageNum -2, pageNum -1, pageNum]\n          if (index === 3) return [1,2,3,4,0,pageNum]\n          if (index === pageNum -2) return [1,0, pageNum-3, pageNum-2, pageNum-1, pageNum]\n          return [1,0, index-1, index, index + 1, 0, pageNum]\n        }\n    }</code></pre></div><p>è·³è½¬äº‹ä»¶ï¼Œåˆ†åˆ«ç‚¹å‡»ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µå’ŒæŒ‡å®šé¡µç ã€‚</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">methods: {\n      goPage(params) {\n        if (params.i === 0 || params.i === that.currentPage) return\n        that.$store.commit(\'GO_PAGE\', (params.i-1) * that.limit)\n        that.$emit(\'getNew\')\n      },\n      goPrePage() {\n        that.$store.commit(\'PRE_PAGE\', that.limit)\n        that.$emit(\'getNew\')\n      },\n      goNextPage() {\n        that.$store.commit(\'NEXT_PAGE\', that.limit)\n        that.$emit(\'getNew\')\n      }\n    }</code></pre></div><h3 id="vuex">vuex éƒ¨åˆ†</h3>\n<p>åœ¨æ­¤ä»‹ç»ä¸€ä¸‹ vuex éƒ¨åˆ†çš„å®ç°ï¼Œå­¦ä¹ äº†äºŒå“²å¤§å¤§çš„ vuex éƒ¨åˆ†çš„ç»“æ„ã€‚åœ¨ src ç›®å½•ä¸‹ï¼ˆå’Œ components ç›®å½•å¹³çº§ï¼‰ï¼Œæ–°å»º store ç›®å½•ï¼Œå…¶ä¸­ index.js æ–‡ä»¶ä¼ å…¥ mutationï¼Œåˆå§‹åŒ– vuexï¼›</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">// vuex \bstore/index.js\n  import Vue from \'vue\'\n  import Vuex from \'vuex\'\n  import mutations from \'./mutations\'\n  \n  Vue.use(Vuex);\n  \n  const state = {\n    offset: 0\n  };\n  \n  export default new Vuex.Store({\n    state,\n    mutations\n  })</code></pre></div><p>mutation-types.js è®°å½•æ‰€æœ‰çš„äº‹ä»¶åï¼Œå…¶å®è¿™ä¸ªæ–‡ä»¶æœ€å¤§çš„å¥½å¤„æ˜¯èƒ½è®©æˆ‘ä»¬æ›´ç›´è§‚åœ°ç®¡ç†æ‰€æœ‰çš„ vuex æ–¹æ³•ï¼Œå®ƒçš„ä¼˜ç‚¹ä¼šåœ¨é¡¹ç›®å¤æ‚åå‡¸æ˜¾å‡ºæ¥ï¼Œé¡¹ç›®å¤æ‚æ—¶æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨ vuex å­˜å‚¨å¾ˆå¤šæ•°æ®ã€å®šä¹‰å¾ˆå¤šæ–¹æ³•ï¼Œè¿™æ—¶ mutation-types.js å°±èƒ½æ›´å¥½æ›´ç›´è§‚åœ°ç®¡ç†è¿™äº›æ–¹æ³•ã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§è®¾è®¡ç†å¿µå˜›ï¼Œæœ‰åˆ©äºåæœŸç»´æŠ¤ã€‚</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">// mutation-types.js\n    export const PRE_PAGE = \'PRE_PAGE\'\n    export const NEXT_PAGE = \'NEXT_PAGE\'\n    export const GO_PAGE = \'GO_PAGE\'</code></pre></div><p>mutation.js è¿™æ˜¯ vuex çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œæ³¨å†Œäº†å®ç°çš„æ‰€æœ‰äº‹ä»¶ï¼Œæˆ‘ä»¬å®šä¹‰äº†ç‚¹å‡»ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µå’Œè·³è½¬åˆ°æŒ‡å®šé¡µé¢çš„æ–¹æ³•ã€‚</p>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">// mutation.js\n  import * as types from \'./mutation-types\'\n\n  export default {\n    // åˆ†é¡µ ä¸Šä¸€é¡µ\n    [types.PRE_PAGE] (state, offset) {\n      state.offset -= offset\n    },\n    // åˆ†é¡µ ä¸‹ä¸€é¡µ\n    [types.NEXT_PAGE] (state, offset) {\n      state.offset += offset\n    },\n    // åˆ†é¡µ è·³è½¬åˆ°æŒ‡å®šé¡µç \n    [types.GO_PAGE] (state, offset) {\n      state.offset = offset\n    }\n  };</code></pre></div><h3 id="how-to-run">how to run</h3>\n<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">$ npm install \n\n$ npm run dev\n\n// è®¿é—® http://localhost:8088/index.html</code></pre></div><p>æœ€åæ‰“ä¸ªå°å¹¿å‘ŠğŸ£ à¹‘ä¹›â—¡ä¹›à¹‘</p>\n<p>æˆ‘çš„ä¸ªäººç½‘ç«™ï¼š<a href="https://minemine.cc/">https://minemine.cc/</a></p>\n<p>github åœ°å€ï¼š<a href="https://github.com/luyilin">https://github.com/luyilin</a></p>\n',excerpt:"<p>åˆ†é¡µæ•ˆæœé¢„è§ˆï¼š</p>\n"};t.options.name=e,t.options.computed=Object.assign({},t.options.computed,{$page:()=>a})},p=Object(s.a)({},n,[],!1,null,null,null);"function"==typeof r&&r(p),p.options.__file=".peco/data/_posts/vue-pagination.md.peson";e.default=p.exports}}]);