<!DOCTYPE html>
<html lang="zh-CN" data-peco="lang">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
    
    <title data-peco="true"></title>
    
    
    
    
    <link rel="preload" href="/_peco/assets/js/main.6380c2.js" as="script"><link rel="prefetch" href="/_peco/assets/js/page-2017-01-29-git.14f1f6.js"><link rel="prefetch" href="/_peco/assets/js/page-2017-04-19-vue-pagination.f7e2f4.js"><link rel="prefetch" href="/_peco/assets/js/page-2017-11-28-old-time.c1bc85.js"><link rel="prefetch" href="/_peco/assets/js/page-2017-12-06-aoba-resume.07af16.js"><link rel="prefetch" href="/_peco/assets/js/page-2018-01-29-create-react-component-like-a-pro.5a141f.js"><link rel="prefetch" href="/_peco/assets/js/page-2018-08-13-internet-novel.dc3b30.js"><link rel="prefetch" href="/_peco/assets/js/page-about.ba50e8.js"><link rel="prefetch" href="/_peco/assets/js/page-admire.de63d3.js"><link rel="prefetch" href="/_peco/assets/js/page-code.ec4dde.js"><link rel="prefetch" href="/_peco/assets/js/page-comment.d0dd02.js"><link rel="prefetch" href="/_peco/assets/js/page-friends.90f23a.js"><link rel="prefetch" href="/_peco/assets/js/page-index.61a387.js"><link rel="prefetch" href="/_peco/assets/js/page-tags-code.10bdbb.js"><link rel="prefetch" href="/_peco/assets/js/page-tags-life.2c56e4.js"><link rel="prefetch" href="/_peco/assets/js/page-timeline.adf4eb.js"><link rel="prefetch" href="/_peco/assets/js/page-youth.7e6080.js">
    <link rel="stylesheet" href="/_peco/assets/css/styles.6380c2.css">
  </head>
  <body data-peco="">
    <div id="__peco" data-server-rendered="true"><div id="app"><div class="index-wrap"><canvas id="evanyou"></canvas> <div class="nav-wrap headroom"><nav><div class="tab-wrap"><a href="/" class="tab tab-item router-link-active"><div class="a"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-folder"></use></svg> <span>Mine</span></div></a> <a href="/timeline" class="tab tab-item"><div class="a"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-pencil"></use></svg> <span>时间轴</span></div></a> <div class="tab tab-item"><div class="a"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-notebook"></use></svg> <span>文字</span></div> <div class="tab-1" style="display:none;"><a href="/tags/life" class="li-1 tab-item"><div class="a">青春如梦</div></a> <a href="/tags/code" class="li-1 tab-item"><div class="a">举个栗子</div></a></div></div> <div class="tab tab-item"><div class="a"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-computer"></use></svg> <span>code</span></div> <ul class="tab-1" style="display:none;"><li class="li-1"><a href="https://luyilin.github.io/Aoba" target="_blank">Aoba</a></li> <li class="li-1"><a href="https://luyilin.github.io/foldcontent-zhihu/src/demo.html" target="_blank">foldcontent-zhihu</a></li> <li class="li-1"><a href="https://luyilin.github.io/vue-pagination-minemine/dist/index.html" target="_blank">vue-pagination</a></li> <li class="li-1"><a href="https://luyilin.github.io/vue-google-form/dist/index" target="_blank">vue-google-form</a></li> <li class="li-1"><a href="https://luyilin.github.io/Maltose/demo/" target="_blank">Maltose</a></li> <li class="li-1"><a href="https://github.com/luyilin/awesome-web" target="_blank">awesome web</a></li></ul></div> <a href="/friends" class="tab tab-item"><div class="a"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-doughnut"></use></svg> <span>友人账</span></div></a> <a href="/comment" class="tab tab-item"><div class="a"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-chat"></use></svg> <span>留言板</span></div></a> <a href="/admire" class="tab tab-item"><div class="a"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-beer"></use></svg> <span>赞赏</span></div></a> <a href="/about" class="tab tab-item"><div class="a"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-girl"></use></svg> <span>关于我</span></div></a></div></nav></div> <header><h1 class="main-title pointer"></h1> <div class="intro animated bounceInUp"><img src="https://wx2.sinaimg.cn/mw690/a2117cdbly1fnu37j8tfkj20cs0cst91.jpg" class="avatar animated"> <h2>Write something for my love.</h2></div></header> <div class="content-wrap"><div class="essay-wrap" style="width:70%;"><div class="essay-item"><div class="markdown-content"><h1><a href="/2017/01/29/git" class="essay-title router-link-exact-active router-link-active">
      记在小本本上的 git 操作
    </a></h1> <p class="meta"><i class="iconfont iconfont-essay icon-icon01"></i>
    写于2017年01月29日
  </p> <!----> <div class="markdown-section"><p>标签： git</p>
<p>查看 git 配置信息</p>
<div class="pre-wrapper" v-pre="" data-lang="git"><pre class="language-git"><code class="language-git"><span class="token command">$ git config<span class="token parameter"> --list</span></span>
or
<span class="token command">$ git config<span class="token parameter"> -l</span></span></code></pre></div><p>设置 git 配置信息 <!--more--></p>
<ul>
<li>全局设置</li>
</ul>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> config --global user.name <span class="token string">"{{userName}}"</span>
$ <span class="token function">git</span> config --global user.email <span class="token string">"{{userEmail}}"</span></code></pre></div><ul>
<li>修改当前项目的 git 配置信息</li>
</ul>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">ls</span> -a
$ <span class="token function">cd</span> .git/
$ <span class="token function">vi</span> config
add
<span class="token punctuation">[</span>user<span class="token punctuation">]</span>
   name <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>userName<span class="token punctuation">}</span><span class="token punctuation">}</span>
   email <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>userEmail<span class="token punctuation">}</span><span class="token punctuation">}</span>

<p>or
$ <span class="token function">git</span> config user.name <span class="token string">&quot;{{userName}}&quot;</span>
$ <span class="token function">git</span> config user.email <span class="token string">&quot;{{userEmail}}&quot;</span></code></pre></div><p>查看分支</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> branch 查看本地分支
$ <span class="token function">git</span> branch -r 查看远程分支
$ <span class="token function">git</span> branch -a 查看所有分支</code></pre></div><p>创建一个新分支</p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> checkout -b <span class="token punctuation">{</span><span class="token punctuation">{</span>branch<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></div><p>切换分支</p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> checkout <span class="token punctuation">{</span><span class="token punctuation">{</span>branch<span class="token punctuation">}</span><span class="token punctuation">}</span>

<p>$ <span class="token function">git</span> checkout -b <span class="token punctuation">{</span><span class="token punctuation">{</span>remoteBranch<span class="token punctuation">}</span><span class="token punctuation">}</span> origin/<span class="token punctuation">{</span><span class="token punctuation">{</span>remoteBranch<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></div><p>删除分支</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> branch -D <span class="token punctuation">{</span><span class="token punctuation">{</span>loaclBranch<span class="token punctuation">}</span><span class="token punctuation">}</span>
$ <span class="token function">git</span> push --delete origin <span class="token punctuation">{</span><span class="token punctuation">{</span>remoteBranch<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></div><p>合并分支</p>
<div class="pre-wrapper" v-pre="" data-lang=""><pre class=""><code class="">$ git merge {{branch}} 将 branch 与当前分支合并</code></pre></div><p>储藏修改</p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> stash 当你想切换到其他分支又不想提交现在修改的东西时，当你在修改好前想 <span class="token function">git</span> pull 时，用 <span class="token function">git</span> stash 来得到一个干净的工作目录

<p>$ <span class="token function">git</span> stash save <span class="token string">&#39;&#39;</span> 给你的 stash 取个名字</p>
<p>$ <span class="token function">git</span> stash pop 重新应用储藏内容</p>
<p>$ <span class="token function">git</span> stash list 查看现有储藏列表</p>
<p>$ <span class="token function">git</span> stash apply stash@<span class="token punctuation">{</span>number<span class="token punctuation">}</span> 应用某次储藏，但未从栈上移除，需继续 <span class="token function">git</span> stash drop stash@<span class="token punctuation">{</span>number<span class="token punctuation">}</span> <span class="token punctuation">(</span>I like pop<span class="token operator">!</span></code></pre></div><p>查看提交历史</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> log

<p>$ <span class="token function">git</span> log -p  查看每次提交的内容差异</p>
<p>$ <span class="token function">git</span> log -p -2 显示最近的两次更新</code></pre></div><p>查看 commit head message</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> reflog</code></pre></div><p>打 tag</p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> tag <span class="token punctuation">{</span><span class="token punctuation">{</span>tagName<span class="token punctuation">}</span><span class="token punctuation">}</span>
$ <span class="token function">git</span> push origin <span class="token punctuation">{</span><span class="token punctuation">{</span>tagName<span class="token punctuation">}</span><span class="token punctuation">}</span>
or
$ <span class="token function">git</span> push --tags</code></pre></div><p>删除 tag</p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> tag -d <span class="token punctuation">{</span><span class="token punctuation">{</span>localTag<span class="token punctuation">}</span><span class="token punctuation">}</span>

<p>$ <span class="token function">git</span> tag -d <span class="token punctuation">{</span><span class="token punctuation">{</span>remoteTag<span class="token punctuation">}</span><span class="token punctuation">}</span>
$ <span class="token function">git</span> push origin :refs/tags/<span class="token punctuation">{</span><span class="token punctuation">{</span>remoteTag<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></div><p>给一个历史提交添加 tag</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">// Set the HEAD to the old commit that we want to tag
$ <span class="token function">git</span> checkout <span class="token punctuation">{</span><span class="token punctuation">{</span>leading 7 chars of commit<span class="token punctuation">}</span><span class="token punctuation">}</span>

<p>// temporarily <span class="token keyword">set</span> the <span class="token function">date</span> to the <span class="token function">date</span> of the HEAD commit, and add the tag
$ GIT_COMMITTER_DATE<span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> show --format<span class="token operator">=</span>%aD <span class="token operator">|</span> <span class="token function">head</span> -1<span class="token variable">)</span></span>&quot;</span> <span class="token function">git</span> tag -a <span class="token punctuation">{</span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span><span class="token punctuation">}</span> -m <span class="token string">&quot;{{commit message}}&quot;</span></p>
<p>// <span class="token keyword">set</span> HEAD back to whatever you want it to be
$ <span class="token function">git</span> checkout master</p>
<p>$ <span class="token function">git</span> push --tags</code></pre></div><p>push 后发现没加 .gitignore，删除本地及远程的冗余提交</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> <span class="token function">rm</span> -r --cached <span class="token keyword">.</span>
$ <span class="token function">git</span> add <span class="token keyword">.</span>
$ <span class="token function">git</span> commit -m <span class="token string">"{{commit message}}"</span>
$ <span class="token function">git</span> push</code></pre></div><p>修改已经 commit 的邮箱和用户名</p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">// get the commit we want to modify
$ <span class="token function">git</span> log

<p>// go to the commit
$ <span class="token function">git</span> reset --soft <span class="token punctuation">{</span><span class="token punctuation">{</span>commitId<span class="token punctuation">}</span><span class="token punctuation">}</span></p>
<p>$ <span class="token function">git</span> commit --amend --author<span class="token operator">=</span><span class="token string">&#39;{{userName}}&lt;{{userEmail}}&gt;&#39;</span>
$ <span class="token function">git</span> push</code></pre></div><p>修改已经 push 的 commit 的邮箱和用户名</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">// clone a new repo
<span class="token function">git</span> clone --bare https://github.com/user/repo.git
<span class="token function">cd</span> repo.git</code></pre></div><div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">// copy the script below and modify the variables: OLD_EMAIL, CORRECT_NAME, CORRECT_EMAIL

<p><span class="token comment">#! /bin/sh</span></p>
<p><span class="token function">git</span> filter-branch --env-filter <span class="token string">&#39;</p>
<p>OLD_EMAIL=&quot;&quot;
CORRECT_NAME=&quot;Your Correct Name&quot;
CORRECT_EMAIL=&quot;<a href="mailto:your-correct-email@example.com">your-correct-email@example.com</a>&quot;</p>
<p>if [ &quot;<span class="token variable">$GIT_COMMITTER_EMAIL</span>&quot; = &quot;<span class="token variable">$OLD_EMAIL</span>&quot; ]
then
    export GIT_COMMITTER_NAME=&quot;<span class="token variable">$CORRECT_NAME</span>&quot;
    export GIT_COMMITTER_EMAIL=&quot;<span class="token variable">$CORRECT_EMAIL</span>&quot;
fi
if [ &quot;<span class="token variable">$GIT_AUTHOR_EMAIL</span>&quot; = &quot;<span class="token variable">$OLD_EMAIL</span>&quot; ]
then
    export GIT_AUTHOR_NAME=&quot;<span class="token variable">$CORRECT_NAME</span>&quot;
    export GIT_AUTHOR_EMAIL=&quot;<span class="token variable">$CORRECT_EMAIL</span>&quot;
fi
&#39;</span> --tag-name-filter <span class="token function">cat</span> -- --branches --tags</code></pre></div><div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">// <span class="token keyword">then</span> press enter to run the script</p>
<p>// checkout <span class="token keyword">if</span> there any error <span class="token keyword">in</span> new <span class="token function">git</span> and push
$ <span class="token function">git</span> push --force --tags origin <span class="token string">'refs/heads/*'</span></p>
<p>// delete the temporary clone
$ <span class="token function">cd</span> <span class="token punctuation">..</span>
$ <span class="token function">rm</span> -rf repo.git</code></pre></div><p>修改已经 push 的 commit message</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">方法一:
$ <span class="token function">git</span> commit --amend
$ <span class="token function">git</span> push --force

<p>方法二:
$ <span class="token function">git</span> rebase -i HEAD~n</p>
<p>change the <span class="token variable"><span class="token variable"><code>&lt;/span&gt;pick&lt;span class=&quot;token variable&quot;&gt;</code></span></span> to <span class="token variable"><span class="token variable"><code>&lt;/span&gt;reword&lt;span class=&quot;token variable&quot;&gt;</code></span></span>, <span class="token function">which</span> means edit the commit message</p>
<p>save and <span class="token keyword">exit</span> and <span class="token keyword">then</span> update the commit message as you like and :wq</p>
<p>$ <span class="token function">git</span> push --f</code></pre></div><p>修改已经 push 的提交内容</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">git</span> reset --hard <span class="token punctuation">{</span><span class="token punctuation">{</span>commitId<span class="token punctuation">}</span><span class="token punctuation">}</span>

<p><span class="token function">git</span> add <span class="token keyword">.</span></p>
<p><span class="token function">git</span> commit --amend</p>
<p><span class="token function">git</span> push origin HEAD --force</code></pre></div><p>解决提交前的 conflict，协同工作必备</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">// 先不提交修改的内容直接创建新分支 temp ，若已 commit 则创建新分支后在本分支 reset 到上一个 commit ,再执行 <span class="token function">git</span> pull

<p>$ <span class="token function">git</span> checkout -b temp</p>
<p>$ <span class="token function">git</span> add <span class="token keyword">.</span></p>
<p>$ <span class="token function">git</span> commit -m <span class="token string">&#39;commit message&#39;</span></p>
<p>// 此时的master 分支是干净的，无自己的提交
$ <span class="token function">git</span> checkout master</p>
<p>// 拉取远程修改
$ <span class="token function">git</span> pull</p>
<p>// 复制刚刚提交的 commit-id  commit-a, 将自己的提交 cherry-pick 进去
$ <span class="token function">git</span> cherry-pick commit-a</p>
<p>// 如果有冲突 fix it
$ <span class="token function">git</span> add <span class="token keyword">.</span></p>
<p>$ <span class="token function">git</span> cherry-pick --continue</p>
<p>// <span class="token keyword">then</span> push
$ <span class="token function">git</span> push</code></pre></div><p>git 删除远程仓库的某次错误提交</p></p>
<div class="pre-wrapper" v-pre="" data-lang="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> reset --hard HEAD~1

<p>$ <span class="token function">git</span> push --force
// <span class="token function">git</span> push -f</p>
<p>// 强制推送到远程仓库，远程仓库里的错误提交也会消失</code></pre></div><ul></p>
<li>需注意，其实这种方法仅适用于删除最新的一次提交，如果某次错误提交后又有了一个新的提交，则强制删除错误提交会导致后面的提交也消失，因此需慎用此方法，尤其是在多人协作项目上(°ー°〃)</li>
</ul>
<p>gerrit merge 前执行 git commit --amend 改写上次提交，并将 gerrit 上的 changeid 加入到上次提交的 commit message 下面（上下各空一行），再 git push（还是原来的 commit，不产生新的提交）</p>
<p>bash ctrl＋R 快速查看输入过的命令</p>
<p>git 创建仓库并关联到 github</p>
<ul>
<li>
<p>cd 到项目目录，git init 初始化，使 git 对此项目进行版本控制</p>
</li>
<li>
<p>git add .</p>
</li>
<li>
<p>git commit -m ''</p>
</li>
<li>
<p>在 github 上创建一个新仓库 create a new repository</p>
</li>
<li>
<p>将本地项目关联到建立的新仓库上 <code v-pre="">git remote add origin {{url}}</code></p>
</li>
<li>
<p>运行 <code v-pre="">$ git remote -v</code> 查看 origin 关联</p>
</li>
<li>
<p><code v-pre="">git push -u origin master</code></p>
</li>
<li>
<p>若本地已有代码非空, 则直接<code v-pre="">git remote add origin {{url}}</code></p>
</li>
<li>
<p><code v-pre="">git push -u origin master</code></p>
</li>
<li>
<p>若将一个 git 仓库关联为另一个 git 仓库,则<code v-pre="">ls -a</code> 删除 .git/ 文件夹即可
删除 git 版本控制, 然后再执行 remote</p>
</li>
</ul>
<p>Github Pages 发布静态页面</p>
<ul>
<li>repository-Settings-Github Pages-select a source and save</li>
</ul>
</div></div></div></div> <div class="sidebar"><section class="catch-me sidebar-item"><div class="sweet"></div> <h2>Can u catch me ?</h2> <div class="catch-item"><a href="https://github.com/luyilin" target="_blank" data-tip="Github" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-github"></i></a> <a href="https://www.zhihu.com/people/yilin-lu-12/activities" target="_blank" data-tip="知乎" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-zhihu"></i></a> <a href="http://weibo.com/2719055067/profile?topnav=1&wvr=6&is_all=1" target="_blank" data-tip="Weibo" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-weibo"></i></a> <a href="https://segmentfault.com/u/yilind" target="_blank" data-tip="Segmentfault" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-iconsf"></i></a></div> <div class="catch-item"><a href="https://www.instagram.com/yilinkkk/" target="_blank" data-tip="Instagram" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-instagram"></i></a> <a href="https://t.me/luyilin" target="_blank" data-tip="Telegram" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-telegram"></i></a> <a href="https://twitter.com/luyilin12" target="_blank" data-tip="Twitter" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-twitter"></i></a> <a href="/rss" target="_blank" data-tip="RSS" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-rss"></i></a> <a href="mailto:luyilin12@gmail.com" target="_blank" data-tip="Email me!" class="item-a btn-hover btn-hover-slide"><i class="iconfont icon-email"></i></a></div></section> <section class="sidebar-item switch pointer">Close the sidebar</section></div></div></div></div></div>
    
    <script src="/_peco/assets/js/main.6380c2.js" defer></script>
  </body>
</html>
